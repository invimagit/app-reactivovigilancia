<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                template="../template/mainMenuTemplate.xhtml">
    <!--**********************************************************************************************-->
    <!--**********************************************************************************************-->
    <!--**********************************************************************************************-->
    <ui:define name="content">
            <!--  ********************************************************** -->
            <!--  ********************************************************** -->
            <p:dialog modal="true" widgetVar="statusDialog" header="Procesando registros de ReactivoVigilancia" draggable="false" closable="false" resizable="false" width="300" height="300" style="alignment-adjust:middle">
                 <br/>
                 <br/>
                 <br/>
                 <center>
                 <p:graphicImage id="animacionBusqueda" value="/resources/images/procesando.gif" alt="Procesando registros de ReactivoVigilancia" title="Procesando registros de ReactivoVigilancia"/>
                     <br/>
                 <p:clock pattern="HH:mm:ss dd.MM.yyyy" mode="server" />
                 </center>
                 <br/>
                 <br/>
             </p:dialog>        
            <!--  ********************************************************** -->
            <!--  ********************************************************** -->
            <script language="JavaScript" type="text/JavaScript">
                    function start() 
                    {
                        console.log ("arrancando animacion");
                        PF('statusDialog').show();
                    }
                    /*******************************************************************/
                    /*******************************************************************/
                    /*******************************************************************/
                    function stop() 
                    {
                       PF('statusDialog').hide();
                       console.log ("Deteniendo animacion");
                    }
                    /*******************************************************************/
                    /*******************************************************************/
                    function limpiarFilas()
                    {
		if (window.confirm("¿Desea cancelar la aprobación de los registros de Reporte Masivo Trimestral? (S/N)"))
		{
                                        PF('datosReporteWidget').unselectAllRows();
                                        return (true);
		}
                                else
                                {
                                    return (false);
                                }
                    }
                    /*******************************************************************/
                    /*******************************************************************/
                    function validarOpcionDepartamento()
                    {
                                        console.log ("Entre al script");
                                        console.log ("************************************************************");
                                        console.log ("************************************************************");
                                        var idDepto = "";
                                        idDepto = $("#departamento_input").val();
                                        console.log ("DEPARTAMENTO SELECCIONADO APROBADOR = " + idDepto);
                                        
                                        if (idDepto === "0")
                                        {
                                            alert ("Debe seleccionar un departamento para generar el reporte");
                                            return (false);
                                        }
                                        else
                                        {
                                           start();
                                           return (true);
                                        }
                    }   
                    /*******************************************************************/
                    /*******************************************************************/
                    /*******************************************************************/
                    /*******************************************************************/
        </script>
        <div align="center">
            <h:form onkeypress="if (event.keyCode === 13) { return false; }" id="formularioBusquedaPrerdivs"  prependId="false">
            <p:growl id="messages" showDetail="true" autoUpdate="true"/>
            <center>
                    <p:outputLabel value="APROBACIÓN DE REPORTES TRIMESTRALES MASIVOS POR PARTE DE LA ETS Y EL INVIMA" style="font-weight: bold;font-size: 12px;"/>
                    <br/>
                    <p:outputLabel value="SECRETARÍA DE SALUD #{beanBusquedaPrerdivs.nombreAprobador}" style="font-weight: bold;font-size: 12px;"/>
                    <br/>
                    <br/>
                    <center>
                            <a href="#" onclick="abrirAyuda('visorTutorial.xhtml?rutaVideoTutorial=#{beanParametrosGenerales.obtenerDireccionServidor()}ManualesReactivo/videos/Aprobacion.mp4')">                                
                                    <p:outputLabel value="VideoTutorial de Aprobacion" style="font-weight: bold;font-size: 12px;"/>
                                    <p:graphicImage value="/resources/images/video.png" width="7%" height="3%"/>
                            </a>
                    </center>
                    <p:panelGrid columns="2" style="width:1200px" id="displayCrear">
                      <f:facet name="header">
                        <p:graphicImage url="/resources/images/logo-invima.png" style="border:none;" id="logoInvimaCrear" alt="Invima"/>
                      </f:facet>
                      <!-- **************************************************************** -->
                      <!-- **************************************************************** -->
                      <!-- **************************************************************** -->
                      <p:outputLabel value="Departamento del Reportante:" for="departamento" />
                      <p:selectOneMenu id="departamento" value="#{beanBusquedaPrerdivs.departamento}" filter="true" appendTo="@this"
                            style="width :66%;font-family:Arial, Helvetica, sans-serif; font-weight:normal; font-size:0.95em;" required="false">
                            <p:ajax listener="#{beanBusquedaPrerdivs.onChangeDepartamento}" update="municipio,ipsreportante" 
                                    process="@this" partialSubmit="true"/>
                            <f:selectItem itemLabel="Seleccione una opción" itemValue="0" noSelectionOption="true" />
                            <f:selectItems value="#{beanBusquedaPrerdivs.listaDepartamentos}"/>
                       </p:selectOneMenu>
                      <!-- **************************************************************** -->
                      <!-- **************************************************************** -->
                      <p:outputLabel value="Municipio del Reportante:" for="municipio"/>
                      <p:selectOneMenu id="municipio" value="#{beanBusquedaPrerdivs.municipio}" filter="true" appendTo="@this"
                              style="width :66%;font-family:Arial, Helvetica, sans-serif; font-weight:normal; font-size:0.95em;" required="false">
                            <p:ajax listener="#{beanBusquedaPrerdivs.actualizarMunicipio}" partialSubmit="true" update="datosReporte"/>
                            <f:selectItem itemLabel="Seleccione una opción" itemValue="0" noSelectionOption="true" />
                            <f:selectItems value="#{beanBusquedaPrerdivs.listaMunicipios}"/>
                      </p:selectOneMenu>
                      <!-- **************************************************************** -->
                      <!-- **************************************************************** -->
                      <p:outputLabel value="Fecha Inicial:" for="fechaInicial" />
                      <p:calendar locale="es" id="fechaInicial" value="#{beanBusquedaPrerdivs.fechaInicial}" showOn="button" pattern="yyyy/MM/dd" widgetVar="fechaInWV"/>  
                      <!-- **************************************************************** -->
                      <!-- **************************************************************** -->
                      <p:outputLabel value="Fecha Final" for="fechaFinal" />
                      <p:calendar locale="es" id="fechaFinal" value="#{beanBusquedaPrerdivs.fechaFinal}" showOn="button" pattern="yyyy/MM/dd" widgetVar="fechaFinWV"/>  
                      <!-- **************************************************************** -->
                      <!-- **************************************************************** -->
                      <p:outputLabel value="Nombre del reportante:" for="ipsreportante" />
                      <p:selectOneMenu id="ipsreportante" value="#{beanBusquedaPrerdivs.ipsreportante}" 
                               filter="true" appendTo="@this"
                               style="width :66%;font-family:Arial, Helvetica, sans-serif; font-weight:normal; font-size:0.95em;" 
                               title="Seleccione la IPS o Banco de Tejidos Reportante o el Banco de Tejidos"
                               required="false">
                            <f:selectItem itemLabel="Seleccione una Entidad Reportante" itemValue="-1" noSelectionOption="true"/>
                            <f:selectItems value="#{beanBusquedaPrerdivs.listaIPSReportante}"/>
                      </p:selectOneMenu>
                      <!-- **************************************************************** -->
                      <!-- **************************************************************** -->
                      <p:outputLabel value="Rol de Usuario:" for="rolUsuario" />
                      <p:selectOneMenu id="rolUsuario" value="#{beanBusquedaPrerdivs.rolUsuario}" filter="true" appendTo="@this"
                               style="width :66%;font-family:Arial, Helvetica, sans-serif; font-weight:normal; font-size:0.95em;" 
                               title="Seleccione el rol del usuario"
                               required="false">
                            <f:selectItem itemLabel="Seleccione el Rol de Usuario" itemValue="-1" noSelectionOption="true"/>
                            <f:selectItem itemLabel="Fabricante/Importador" itemValue="2"/>
                            <f:selectItem itemLabel="Entidad Prestadora de Salud" itemValue="3"/>
                      </p:selectOneMenu>
                      <!-- **************************************************************** -->
                      <!-- **************************************************************** -->
                    </p:panelGrid>
                    <br/>
                    <center>
                        <c:set var = "generaReporte" scope = "session" value = "#{beanBusquedaPrerdivs.esAdministrador}"/>
                        <c:choose>
                            <c:when test="${generaReporte == false}">
                                <p:commandButton id="botonGenerarS" value="Buscar Reportes Cargados" style="vinculoSinDiv"  
                                  actionListener="#{beanBusquedaPrerdivs.generarReporte}" ajax="true" 
                                  onstart="return validarOpcionDepartamento()" oncomplete="stop()"
                                  update="datosReporte"/>
                            </c:when>
                            <c:otherwise>
                                <p:commandButton id="botonGenerarA" value="Buscar Reportes Cargados" style="vinculoSinDiv"  
                                  actionListener="#{beanBusquedaPrerdivs.generarReporte}" ajax="true" 
                                  onstart="start()" oncomplete="stop()"
                                  update="datosReporte"/>
                            </c:otherwise>
                        </c:choose>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <p:commandButton id="botonLimpiar" value="Limpiar Campos" style="vinculoSinDiv"  
                                             actionListener="#{beanBusquedaPrerdivs.limpiarCampos}" ajax="true" 
                                             onstart="start()" oncomplete="stop()" 
                                             update="departamento,municipio,fechaInicial,fechaFinal,rolUsuario,datosReporte"/>
                    </center>
                            <br/>
                            <br/>
                            <p:dataTable emptyMessage="Sin registros encontrados" id="datosReporte" 
                                         var="filaReporte" widgetVar="datosReporteWidget"
                                         value="#{beanBusquedaPrerdivs.listadoPrerdivsParaAprobacion}" 
                                         selection="#{beanBusquedaPrerdivs.listadoPrerdivsParaAprobacionEscogidos}" 
                                         rowKey="#{filaReporte.precol}"
                                         style="width: 2100px;" editable="true"
                                         sortMode="multiple"  styleClass="estilo_tabla" resizableColumns="true" >
                                <f:facet name="header">
                                    Listado de Registros Cargados de Reporte Masivo Trimestral
                                </f:facet>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:ajax event="rowEdit" listener="#{beanBusquedaPrerdivs.onEdit}" update="messages" />  
                                <p:ajax event="rowEditInit" listener="#{beanBusquedaPrerdivs.capturarDatoFila}"/>                        
                                <p:ajax event="rowEditCancel" listener="#{beanBusquedaPrerdivs.onCancel}" update="messages" /> 
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column selectionMode="multiple" style="width:16px;text-align:center" exportable="false"/>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="PRERDIV" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.precol}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.precol}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="DEPARTAMENTO REPORTANTE" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.departamento}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.departamento}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="MUNICIPIO REPORTANTE" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.municipio}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.municipio}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="NOMBRE REPORTANTE" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.nombre_reportante}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.nombre_reportante}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="ROL USUARIO" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{beanBusquedaPrerdivs.obtenerNombreRolUsuario(filaReporte.id_rol)}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{beanBusquedaPrerdivs.obtenerNombreRolUsuario(filaReporte.id_rol)}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="FECHA INGRESO" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.fecha_ingreso}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.fecha_ingreso}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="DESCRIPCION EVENTO" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.descripcionEvento}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.descripcionEvento}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="NOMBRE REACTIVO IN VITRO" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.nombreReactivo}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.nombreReactivo}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="INSTITUCIÓN OCURRENCIA" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.nombreInstitucion}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.nombreInstitucion}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="NIT INSTITUCIÓN OCURRENCIA" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.nitInstitucion}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.nitInstitucion}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="REGISTRO SANITARIO DISP." styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.registroSanitario}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.registroSanitario}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="CAUSA PROBABLE" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.codigoCausa}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <p:selectOneMenu id="codigoCausaGrilla" value="#{beanBusquedaPrerdivs.causaProbable}" 
                                                             style="width :66%;font-family:Arial, Helvetica, sans-serif; font-weight:normal; font-size:0.95em;" 
                                                             title="Seleccione la causa probable del evento/incidente"
                                                             required="false">
                                                <f:selectItem itemLabel="Seleccione una opción" itemValue="0" noSelectionOption="true" />
                                                <f:selectItems value="#{beanBusquedaPrerdivs.listaCausasProbables}"/>
                                            </p:selectOneMenu>
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="GESTIÓN ENTE" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.gestionEnte}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <p:inputTextarea rows="6" cols="33" 
                                                             id="gestionEnteGrilla" value="#{filaReporte.gestionEnte}" style="width:100%"  
                                                maxlength="200" required="false"
                                                title="Ingrese una descripción detallada del seguimiento al caso del reporte"/>
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="OBSERVACIÓN INVIMA" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.observacionInvima}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <p:inputTextarea rows="6" cols="33" 
                                                             id="observacionInvimaGrilla" value="#{filaReporte.observacionInvima}" style="width:100%"  
                                                maxlength="200" required="false"
                                                title="Ingrese una descripción detallada del Seguimiento por parte del INVIMA"/>
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column>
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="ESTADO DEL REPORTE" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:cellEditor>  
                                        <f:facet name="output">  
                                            <h:outputText style="font-size:11px;" value="#{filaReporte.estadoCaso}" styleClass="estilo_tablaresumen"/>  
                                        </f:facet>  
                                        <f:facet name="input">  
                                            <p:selectOneMenu id="estadoreporteGrilla" value="#{beanBusquedaPrerdivs.estadoCaso}" title="Seleccione el Estado del Reporte" 
                                                             style="width :66%;font-family:Arial, Helvetica, sans-serif; font-weight:normal; font-size:0.95em;" required="true">
                                               <f:selectItem itemLabel="Seleccione una opción" itemValue="0" noSelectionOption="true" />
                                               <f:selectItem itemLabel="S" itemValue="1"/>
                                               <f:selectItem itemLabel="C" itemValue="2"/>
                                               <f:selectItem itemLabel="A" itemValue="3"/>
                                            </p:selectOneMenu>
                                        </f:facet>  
                                    </p:cellEditor>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column exportable="false">
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="CONSULTA DEL REGISTRO" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <center>
                                        <p:commandLink id="consultarRegistroE_#{filaReporte.precol}" onstart="start()" oncomplete="stop()"
                                                   actionListener="#{beanFichaRegistro.consultarDatosParaFichaProyecto}" process="@this">
                                             <f:param name="id_registro" value="#{filaReporte.precol}"/>
                                             <p:graphicImage value="/resources/images/busqueda.png" 
                                                             width="50%" height="50%" id="icono_#{filaReporte.precol}"
                                                             alt="Consultar Registro de Precol" title="Consultar Registro de Precol"/>
                                    </p:commandLink>
                                    </center>
                                </p:column>
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <p:column exportable="false">  
                                    <f:facet name="header">  
                                        <h:outputText style="font-size:11px;" value="OPCIONES" styleClass="estilo_encabezadotablaes"/>  
                                    </f:facet>
                                    <p:rowEditor />  
                                </p:column> 
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                                <!-- ****************************************************** -->
                            </p:dataTable>                            
                            <br/>
                            <center>
                                <p:panel id="panelBotones" style="width:90%;text-align:center;border: none;">
                                    <p:commandButton value="Aprobar Reportes Trimestrales" id="botonAprobacion" 
                                                     onstart="start()" oncomplete="stop()" 
                                                     ajax="true" update="datosReporte,messages" actionListener="#{beanBusquedaPrerdivs.convertirPrerdivsEnRDivs()}">
                                                    <p:confirm header="Confirmación" message="¿Desea realizar la aprobación de los Registros de Reporte Masivo Trimestral de la IPS? (S/N)" icon="ui-icon-alert" />
                                                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                        <p:commandButton value="Sí" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" id="botonSiAprobar"/>
                                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"  id="botonNoAprobar"/>
                                                    </p:confirmDialog>                                        
                                    </p:commandButton>
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                    <p:commandButton value="Rechazar Reportes Trimestrales" id="botonRechazoPrecoles" 
                                                     onstart="start()" oncomplete="stop()" 
                                                     ajax="true" update="datosReporte,messages" actionListener="#{beanBusquedaPrerdivs.rechazarPrerdivsCargue}">
                                                    <p:confirm header="Confirmación" message="¿Desea realizar el rechazo de los Registros de Reporte Masivo Trimestral de la IPS? (S/N)" icon="ui-icon-alert" />
                                                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                        <p:commandButton value="Sí" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" id="botonSiRechazar"/>
                                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"  id="botonNoRechazar"/>
                                                    </p:confirmDialog>                                        
                                    </p:commandButton>
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                    <p:commandButton value="Limpiar Campos" id="botonCancelar" actionListener="#{beanBusquedaPrerdivs.limpiarCamposGrilla}" ajax="true" 
                                                     update="datosReporte" 
                                                     onclick="return limpiarFilas()"/>
                                </p:panel>
                            </center>
                <p:separator/>
                <p:panel id="panelExportacion" header="Exporte los resultados a los siguientes formatos" style="width:1200px">
                    <center>
                        <h:commandLink>
                            <p:graphicImage value="resources/images/excel.png" style="border:none;" id="expExcel"/>
                            <p:dataExporter type="xls" target="datosReporte" fileName="InformacionDescarga" pageOnly="false"/>
                        </h:commandLink>
                        &nbsp;&nbsp;&nbsp;
                        <h:commandLink>
                            <p:graphicImage value="resources/images/csv.png" style="border:none;" id="expCSV"/>
                            <p:dataExporter type="csv" target="datosReporte" fileName="InformacionDescarga" pageOnly="false" />
                        </h:commandLink>
                        &nbsp;&nbsp;&nbsp;
                        <h:commandLink>
                            <p:graphicImage value="resources/images/xml.png" style="border:none;" id="expXML"/>
                            <p:dataExporter type="xml" target="datosReporte" fileName="InformacionDescarga" pageOnly="false" />
                        </h:commandLink>                
                    </center>
                </p:panel>
            <br/>
            <br/>
                    <h:commandLink action="/faces/Principal.xhtml" id="inicio">
                            <p:graphicImage value="resources/images/home.png"/>
                            <h:outputText value="Regresar a la Pantalla Principal" styleClass="enlaceRetorno"/>
                    </h:commandLink>
            </center>
            </h:form>
        </div>
    </ui:define>    
    <!--**********************************************************************************************-->
    <!--**********************************************************************************************-->
    <!--**********************************************************************************************-->
</ui:composition>