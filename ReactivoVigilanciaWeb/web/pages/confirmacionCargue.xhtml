<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                template="../template/mainMenuTemplateSinMenu.xhtml">
    <ui:define name="content">
            <!--  ********************************************************** -->
            <!--  ********************************************************** -->
            <p:dialog modal="true" widgetVar="statusDialog" header="Procesando registros de ReactivoVigilancia" draggable="false" closable="false" resizable="false" width="300" height="300" style="alignment-adjust:middle">
                 <br/>
                 <br/>
                 <br/>
                 <center>
                 <p:graphicImage id="animacionBusqueda" value="/resources/images/procesando.gif" alt="Procesando registros de ReactivoVigilancia" title="Procesando registros de ReactivoVigilancia"/>
                     <br/>
                 <p:clock pattern="HH:mm:ss dd.MM.yyyy" mode="server" />
                 </center>
                 <br/>
                 <br/>
             </p:dialog>        
            <!--  ********************************************************** -->
            <!--  ********************************************************** -->
        <script language="javascript" type="text/javascript">
            //*** Este Codigo permite Validar que sea un campo Numerico
            function Solo_Numerico(variable) {
                Numer = parseInt(variable);
                if (isNaN(Numer)) {
                    return "";
                }
                return Numer;
            }
            function ValNumero(Control) {
                Control.value = Solo_Numerico(Control.value);
            }
        //*** Fin del Codigo para Validar que sea un campo Numerico
                    function start() 
                    {
                        console.log ("arrancando animacion");
                        PF('statusDialog').show();
                    }
                    /*******************************************************************/
                    /*******************************************************************/
                    /*******************************************************************/
                    function stop() 
                    {
                       PF('statusDialog').hide();
                       console.log ("Deteniendo animacion");
                    }
        </script>
        <p:idleMonitor timeout="1800000">
            <p:ajax event="idle" listener="#{crearReporteManagedBean.cerrarSesion}"/>
        </p:idleMonitor>
        <div align="center">
            <p:panel  id="panelTituloReporte" style="width:90%;text-align:left;border: none;">
                <p:panelGrid styleClass="cssPanelesAcidos" style="width: 100%;">
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Reporte trimestral de incidentes asociados al uso de Reactivos In Vitro (archivo en Excel)"/>
                        </p:column>
                        <p:column>
                            <a href="#" onclick="abrirAyuda('../pages/visorManualReactivo.xhtml?rutaArchivoPDF=#{beanParametrosGenerales.obtenerDireccionServidor()}ManualesReactivo/docs/IRETEIM002.pdf')">
                                <p:graphicImage value="../resources/images/help.png" width="100%"/>
                            </a>
                        </p:column>
                    </p:row>
                </p:panelGrid>
            </p:panel>
            <!-- **************************************************************************************** -->
            <!-- **************************************************************************************** -->
            <!-- **************************************************************************************** -->
            <h:form  onkeypress="if (event.keyCode === 13) { return false; }"   id="formularioCargue" prependId="false">
               <p:growl id="messages" showDetail="true" autoUpdate="true"/>
                <!-- **************************************************************************************** -->
                <!-- **************************************************************************************** -->
                <c:if test = "${fileUploadViewMasivoReactivo.operacion == 'resultadoCargue'}">
                        <p:panel id="panelPpalRegistroResultado" style="width:90%;text-align:left;border: none;">
                        <!-- **************************************************************************************** -->
                        <!-- **************************************************************************************** -->
                        <center>
                            <p:outputLabel style="font-size:30px;font-weight: bold;" value="RESULTADO DEL PROCESO DE CARGUE DE ARCHIVO TRIMESTRAL CON INCIDENTES ASOCIADOS AL USO DE REACTIVOS DE DIAGNÓSTICO IN VITRO"/>
                            <br/>
                            <br/>
                            <p>
                                Su reporte periódico ha sido ingresado de manera exitosa al Sistema de Información del Programa Nacional de ReactivoVigilancia, 
                                a continuación se presenta un resumen del trámite efectuado:
                            </p>
                            <br/>
                            <p>
                                Fecha y Hora del Ingreso:  <b>#{fileUploadViewMasivoReactivo.formatearFechaSalida(fileUploadViewMasivoReactivo.fechaRegistro)}</b>
                                <br/>
                                Total de registros cargados en el sistema temporal:  <b>#{fileUploadViewMasivoReactivo.conteoEventos}</b>
                            </p>
                            <br/>
                            <p>
                                El sistema ha notificado a su correo electrónico el detallado de la información de los reportes cargados. Tenga en cuenta que una vez el Invima y/o la Secretaria de Salud 
                                (según corresponda Prestador de Servicio de Salud, importador, fabricante) apruebe los reportes cargados por su organización recibirá un correo electrónico con el respectivo 
                                código asignado a cada caso para su gestión y trazabilidad.
                            </p>
                            <br/>
                            <br/>
                        </center>
                        <!-- **************************************************************************************** -->
                        <!-- **************************************************************************************** -->
                        </p:panel>
                </c:if>
                <!-- ********************************************************************** -->
                <!-- ********************************************************************** -->
                <center>
                    
                    <p:commandButton value="Cerrar el Reporte de Cargue Masivo Trimestral con Evento" id="botonCerrarCargue" 
                                     actionListener="#{fileUploadViewMasivoReactivo.resetearProcesoCargue}" oncomplete="self.close()"/>
                </center>
            </h:form>
            <!-- **************************************************************************************** -->
            <!-- **************************************************************************************** -->
            <!-- **************************************************************************************** -->
        </div>
    </ui:define>    
</ui:composition>


